<!DOCTYPE html>
<html>
<head>
  <title>Register</title>
  <link rel="stylesheet" href="/static/styles.css">
  <script>
    // Restrict date range to 130 years ago until today
    window.onload = function() {
      const today = new Date();
      const maxDate = today.toISOString().split("T")[0];
      const minDate = new Date(today.getFullYear() - 130, today.getMonth(), today.getDate())
        .toISOString().split("T")[0];
      const dobInput = document.querySelector('input[name="date_of_birth"]');
      dobInput.setAttribute("max", maxDate);
      dobInput.setAttribute("min", minDate);
    };

    // Validate password match
    function validateForm() {
      const pw = document.getElementById("password").value;
      const confirmPw = document.getElementById("confirm_password").value;
      if (pw !== confirmPw) {
        alert("Passwords do not match. Please try again.");
        return false;
      }
      return true;
    }
  </script>
</head>
<body>
  <div class="container">
    <h2>Create an Account üìù</h2>
    <p>Join us and start exploring your routes</p>

    <form method="post" action="/register" onsubmit="return validateForm();">
      <label>Username</label>
      <input type="text" name="username" placeholder="Choose a username" required>

      <label>Email</label>
      <input type="email" name="email" placeholder="Enter your email" required>

      <label>Phone</label>
      <input type="text" name="phone" placeholder="Enter your phone number" required>

      <label>Password</label>
      <input type="password" name="password" id="password" placeholder="Create a password" required>

      <label>Confirm Password</label>
      <input type="password" id="confirm_password" placeholder="Re-enter your password" required>

      <label>Date of Birth</label>
      <input type="date" name="date_of_birth" required>

      <button type="submit">Register</button>
    </form>

    <p class="note">Already have an account? <a href="/login">Login here</a></p>
  </div>
</body>
</html>